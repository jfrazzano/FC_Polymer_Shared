<dom-module id="fc-listView">
<<<<<<< HEAD
<<<<<<< HEAD
<style>

=======
<style is="custom-style">
>>>>>>> bc6d38914f4eefe8787c1bb8703b7c30265f7ab4
=======
<style is="custom-style">
>>>>>>> origin/master
    :host {
      @apply(--layout-vertical);
    }

    .main {
      @apply(--layout-flex);
      @apply(--layout-scroll);
    }

    iron-icon {
<<<<<<< HEAD
<<<<<<< HEAD
      color: var(--google-blue-500);
    }

  </style>
      <template>
        <firebase-collection data="{{calls}}" id="FBCallReads" limit-to="1009" order-by-child="timeorder" location="https://focusedstaging1.firebaseio.com/calls"></firebase-collection>
    


<paper-toolbar class="medium-tall"> 
    <div class="vertical layout">
            <div class="fixedsearch">   
                  <paper-input label="Search Call Logs" class="searchbar" required value="Select Place holder">
                  </paper-input>
            </div>
        <paper-icon-button id="button" icon="arrow-back"></paper-icon-button>
</paper-toolbar>
<div class="searchresults">
      <div class="main">
                <template is="dom-repeat" items="{{calls}}" filter='{{_callFilter(searchValues)}}'>
                   <paper-item>
                      <fc-callMemo searchValues="{{item}}">
                      </fc-callMemo>
                    </paper-item>
                </template>
        </div>
</div>
</template>
<script>

=======
=======
>>>>>>> origin/master
      color: var(--google-light-blue-50);
    }

     paper-icon-button {
        margin-left: 20px;
        display: block;
        width: 24px;
        height:24px;
        text-align: center;
      }
      paper-icon-button.blue {
        color: var(--paper-light-blue-50);
      }
  </style>
<template>
      <content>
      </content>
<firebase-collection data="{{calls}}" id="FBCallReads" limit-to="1009" order-by-child="timeorder" location="https://focusedstaging1.firebaseio.com/calls"></firebase-collection>
      

    <paper-toolbar  id="fcpapertoolbar" class="medium">
             </paper-toolbar>
    
    <div class="main">
        
    <template is="dom-repeat" items="{{calls}}" as="pastinquirer" filter='{{_callFilter(inquiry)}}'>
                <paper-item on-click="_scott">
                      <paper-item-body three-line>
                            <div>
                               <b> <span>[[pastinquirer.firstname]]</span> <span>[[pastinquirer.lastname]]</span> </b> called on 
                               <b> <span>[[pastinquirer.timestamp]]</span> </b> regarding, <b><span>[[pastinquirer.relatedstudent]]</span></b>: a <span>[[pastinquirer.grade]]</span> grader at <span>[[pastinquirer.school]]</span> in <span>[[pastinquirer.schooltown]]</span>. <span>[[pastinquirer.firstname]]</span> is interested in <span>[[pastinquirer.interest]]</span> with <span>[[pastinquirer.coach]]</span>, priced at <span>[[pastinquirer.interestprice]</span>
                            </div>
                            <div secondary> <span>[[pastinquirer.firstname]]</span> can be reached at <b><u><span>[[pastinquirer.phone]]</span></b></u> or <u><b><span>[[pastinquirer.email]]</span></b></u>. <span>[[pastinquirer.firstname]]</span> will be called back on or before <b><u><span>[[pastinquirer.callbacktime]]</span></u></b>.
                            </div>
                            <div secondary><b>Additional Message:</b><span>[[pastinquirer.message]]</span></div>
                      </paper-item-body>
                  <iron-icon icon="info"></iron-icon>
                </paper-item>
      </template>
    </div>
</template>
<script>
<<<<<<< HEAD
>>>>>>> bc6d38914f4eefe8787c1bb8703b7c30265f7ab4
=======
>>>>>>> origin/master
  Polymer({

    is: 'fc-listView',

    behaviors: [
      Polymer.NeonAnimatableBehavior
    ],

    listeners: {
<<<<<<< HEAD
<<<<<<< HEAD
      'click': '_onClick'
=======
      //'click': '_onClick'
>>>>>>> bc6d38914f4eefe8787c1bb8703b7c30265f7ab4
=======
      //'click': '_onClick'
>>>>>>> origin/master
    },

    properties: {

      data: {
        type: Array,
        value: function() {
          return [];
<<<<<<< HEAD
<<<<<<< HEAD
        },


      searchValues: {
         type: Object,
          value: {
          firstname: "",
          lastname:"",
          email:"", 
          phone:"",
          relatedstudent: "",
          message: "",
          coach:""


          },
          notify: true, 
          reflectToAttributes: true
        }
      },   
      _callFilter: function(searchfields){
        
        return function(item){
          if(!searchfields) {
            return true;
          }
          //start out with true result & falsify if any non blank match fails
          var result = true;
          console.log(searchfields);
          console.log(item);
          if(searchfields.firstname && searchfields.firstname != "")
          {
            //user entered a value in first name search
            if(item.firstname)            
            {
              result &= (item.firstname.indexOf(searchfields.firstname) > -1);
            }
            else return false; // first name searched but none in record
          }           

          if(searchfields.lastname && searchfields.lastname != "")
          {
            //user entered a value in last name search
            if(item.lastname)           
            {
              result &= (item.lastname.indexOf(searchfields.lastname) > -1);
            }
            else return false; // last name searched but none in record
          }
          if(searchfields.email && searchfields.email != "")
          {
            //user entered a value in email search
            if(item.email)            
            {
              result &= (item.email.indexOf(searchfields.email) > -1);
            }
            else return false; //user entered email search but none in record
          }
          if(searchfields.message && searchfields.message != "")
          {
            //user entered a value in first name search
            if(item.message)            
            {
              result &= (item.message.indexOf(searchfields.message) > -1);
            }
            else return false; // first name searched but none in record
          }           
          if(searchfields.phone && searchfields.phone != "")
          {
            //user entered value in phone search
            if(item.phone)            
            {
              result &= (item.phone.indexOf(searchfields.phone) > -1);
            }
            else return false; //user entered phone search but none in record
          }
          console.log("callFilter returning " + result);
          return result;
      },

=======
=======
>>>>>>> origin/master
            }
        },
      inquiry: {
        type: Object, 
        value: {
          firstname: '',
          lastname: '',
          email: '', 
          phone: '',
          notify: true,
        },
        notify: true,
      },

      pastinquirer:{
         type: Object,
         value: {
               firstname: '', 
               lastname: '', 
               email: '', 
               phone:'', 
               studentfirstname: '', 
               studentlastname: '', 
               relatedstudent: '', 
               message: '', 
               coach:'', 
               grade: '', 
               school:'', 
               schooltown:'', 
               interest:'', 
               interestprice: '',
               intereststartdate: '', 
               role: '',
               notify: true, 
               },
          notify: true
          }, 
      
<<<<<<< HEAD
>>>>>>> bc6d38914f4eefe8787c1bb8703b7c30265f7ab4
=======
>>>>>>> origin/master
      animationConfig: {
        type: Object,
        value: function() {
          return {
            'entry': [{
              name: 'fade-in-animation',
              node: this.$.button
            }],

            'exit': [{
              name: 'fade-out-animation',
              node: this.$.button
            }, {
              name: 'hero-animation',
              id: 'hero',
              fromPage: this
            }]
          };
        }
      }
<<<<<<< HEAD
<<<<<<< HEAD

=======
=======
>>>>>>> origin/master
    },

    _scott: function(e){
      console.log(e.model.pastinquirer);
      this.pastinquirer = e.model.pastinquirer;
      // configure the page animation
      this.sharedElements = {
        'hero': e.target,
      };
      this.fire('item-click', {caller: this.pastinquirer});
<<<<<<< HEAD
>>>>>>> bc6d38914f4eefe8787c1bb8703b7c30265f7ab4
=======
>>>>>>> origin/master
    },

    _onClick: function(event) {
      var target = event.target;
<<<<<<< HEAD
<<<<<<< HEAD
      while (target !== this && !target._templateInstance) {
        target = target.parentNode;
      }

=======
=======
>>>>>>> origin/master
      console.log(event.model);
      if (target == this.$.fcpapertoolbar || target==this.$.fcpapertoolbar.child)
      {
        target = null;
         
     } 
      else {
        target=target.parentNode;
        this.pastinquirer=target.details
        console.log(this.pastinquirer);
        
<<<<<<< HEAD
>>>>>>> bc6d38914f4eefe8787c1bb8703b7c30265f7ab4
=======
>>>>>>> origin/master
      // configure the page animation
      this.sharedElements = {
        'hero': target,
      };

      this.fire('item-click', {
        item: target,
      });
<<<<<<< HEAD
<<<<<<< HEAD
    }

  });
=======
=======
>>>>>>> origin/master


  
    }

  },
   _callFilter: function(inquiry){
        return function(item){
          if(item.firstname.indexOf(inquiry.firstname)> -1 && item.phone.indexOf(inquiry.phone)>-1 && item.lastname.indexOf(inquiry.lastname)>-1) return true;
        } 
        
     }, 

     
});
<<<<<<< HEAD
>>>>>>> bc6d38914f4eefe8787c1bb8703b7c30265f7ab4
=======
>>>>>>> origin/master

</script>
</dom-module>

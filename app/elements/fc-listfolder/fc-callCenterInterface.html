<dom-module id="fc-callCenterInterface">
<style is="custom-style">

.leftPanel {
	
	height:100%;

	}

.rightPanel {
	height: 900px;
}


fc-card{
     padding: 4px;    
}
div.contained{
    height: 600px;
    width: 850px;
    position: relative;
    border: 12px ridge #aecdfe;
    margin: 12px;
    padding: 12px;
}
.clock{
     padding: 35px 4px 20px 24px;

}
paper-button.red {
     background: red;
     raised: true;
     border-radius: 11px;
     box-shadow: 10px 10px 5px #888888;
     font-weight: 800;
     color: #ffffff;
     margin-top: 10px;
     margin-left: 50px;
     font-size: 13px;
     text-align: left;
     text-indent: 0px;
     bottom: 8px;
}

paper-button.green {
     background: green;
     raised: true;
     border-radius: 11px;
     box-shadow: 10px 10px 5px #888888;
     font-weight: 800;
     color: #fff;
     margin-top: 10px;
     margin-left: 50px;
     font-size: 13px;
     text-align: left;
     text-indent: 0px;
     bottom: 8px;
     }

paper-button.gold {
  background: #edc013;
  raised: true;
  border-radius: 11px;
  box-shadow: 10px 10px 5px #888888;
  font-weight: 800;
  color: #002c80;
  margin-top: 10px;
  margin-left: 50px;
  font-size: 13px;
  text-align: left;
  text-indent: 0px;
  bottom: 8px;
}
</style>
<template>
  
      <fc-inputs id="fcInputs" inquirer="{{inq}}">
          <firebase-document id="FBcalls" location="focusedstaging1.firebaseio.com/calls" data="{{calls}}">
</firebase-document>
      </fc-inputs>

<div class="vertical layout wrap">
     <div class="horizontal layout container wrap">
          <div class="leftPanel horizontal layout wrap">
                <fc-card class="container flex wrap" header-title="Call Memo Entry">
                    <paper-item class="wrap">
                      <paper-item-body wrap four-line>
                            <div secondary>
                               <b> <span>[[inq.firstname]]</span> <span>[[inq.lastname]]</span></b> <span hidden id="filler1"> called on </span>
                               <b> <span>[[inq.timestamp]]</span> </b> 
                               <br>regarding, <b><span>[[inq.studentfirstname]]</span> <span>[[inq.studentlastname]]</span></b>: a <span>[[inq.grade]]</span> grader at 
                              </div> 
                              <div secondary><span>[[inq.school]]</span> in <span>[[inq.schooltown]]</span>.
                              </div>
                              <div secondary> <span>[[inq.firstname]]</span> can be reached at <b><u><span>[[inq.phone]]</span></b></u> or <br><u><b><span>[[inq.email]]</span></b></u>. 
                              <br><span>[[inq.firstname]]</span> is <span>[[inq.studentfirstname]]</span>`s <span>[[inq.role]]</span>. 
                              <br>
                              We will contact the <span>[[inq.lastname]]</span>s by <b><u><span>[[inq.callbacktime]]</span></u></b>.
                              </div>
                              <div secondary>
                              <span>[[inq.firstname]]</span> is interested in <span>[[inq.interest]]</span>
                              <br> with <span>[[inq.coach]]</span>, starting on <span>[[inq.intereststartdate]]</span> 
                              <br>
                              and priced at <span>[[inq.interestprice]]</span>.
                              </div>
                              <div secondary width="310px"><b>Additional Message: </b><span>[[inq.message]]</span></div>
                      </paper-item-body>
                </paper-item>
                    </fc-card>
    
          </div>
          <div class="rightPanel layout vertical wrap" height="99vh">
               <div container class="contained">            
                    <fc-listDemo class="fit" id="fcListDemo">  




                    </fc-listDemo>
                 <content>  </content>
 <paper-button class="gold" on-tap="addCall">Add Call</paper-button> 
<paper-button class="green" on-tap="addCall">Add & Register</paper-button>
<paper-button class="red" on-tap="clearInputs">Clear Call</paper-button></content>
               </div>
  		</div><!--right-->
          <fc-card header-title="UnAttended Calls">
           

                
                    </fc-card>
    </div><!--horizontal layout container-->
</div>
</template>
  <script>
    Polymer({
          is: "fc-callCenterInterface",
          properties:{
          },

     ready: function() {
              // this.addEventListener('writeToInputs', this.fillInputsFromCall);
                this.addEventListener('inquirerObserver', this.$.fcInputs.Observer);
          },
         
     fillInputsFromCall: function(e){
           this.$.fcInputs.inquirer = e.detail;
         },

     inquirerObserver: function(e){
                    this.$.fcListDemo.inquirer = e.detail;
                    console.log(e.detail);
          },


     addCall: function(){  
          var rawtime= new Date();
          var callbackTime = new Date();
          callbackTime.setDate(rawtime.getDate() + 2);
          callbackTime = callbackTime.toString().slice(0, 21);
          var time = rawtime.toString().slice(0, 21);
          var order=-event.timeStamp;
          this.$.fcInputs.inquirer.timestamp = time;
          this.$.fcInputs.inquirer.timeorder = order;
          this.$.fcInputs.inquirer.callbacktime = callbackTime;
    
          if(this.$.fcInputs.inquirer.firstname == '' || this.$.fcInputs.inquirer.lastname == ''){
          alert("First and last name are required before adding call.");
          return;
          }
          
          if(this.$.fcInputs.inquirer.email == '' && this.$.fcInputs.inquirer.phone == ''){
          alert("Must supply either phone number or email before adding call.");
          return;
          }

          this.$.fcInputs.relatedstudent = this.$.fcInputs.studentfirstname + " " + this.$.fcInputs.studentlastname + " ";
          this.$.FBcalls._setRemoteDocumentChild(order, this.$.inquirer);

       
          this.$.fcInputs.fcInp1.value = this.$.fcInputs.firstname = "";
          this.$.fcInputs.fcInp2.value = this.$.fcInputs.lastname = "";
          this.$.fcInputs.fcInp3.value = this.$.fcInputs.email = "";
          this.$.fcInputs.fcInp4.value = this.$.fcInputs.phone = "";
          this.$.fcInputs.fcInp5.value = this.$.fcInputs.studentfirstname = "";
          this.$.fcInputs.fcInp6.value = this.$.fcInputs.studentlastname = "";
          this.$.fcInputs.fcInp7.value = this.$.fcInputs.relatedstudent = "";
          this.$.fcInputs.fcInp8.value = this.$.fcInputs.timestamp = "";
          this.$.fcInputs.fcInp9.value = this.$.fcInputs.callbacktime = "";
          this.$.fcInputs.fcInp10.value = this.$.fcInputs.timeorder = "";
          this.$.fcInputs.fcInp11.value = this.$.fcInputs.grade = "";
          this.$.fcInputs.fcInp12.value = this.$.fcInputs.coach = "";
          this.$.fcInputs.fcInp13.value = this.$.fcInputs.school = "";
          this.$.fcInputs.fcInp14.value = this.$.fcInputs.message = "";
          this.$.fcInputs.fcInp15.value = this.$.fcInputs.role = "";
      
     },

 clearInputs: function(){
          this.$.fcInputs.fcInp1.value = "";
          this.$.fcInputs.fcInp2.value = "";
          this.$.fcInputs.fcInp3.value = "";
          this.$.fcInputs.fcInp4.value = "";
          this.$.fcInputs.fcInp5.value = "";
          this.$.fcInputs.fcInp6.value = "";
          this.$.fcInputs.fcInp7.value = "";
          this.$.fcInputs.fcInp8.value = "";
          this.$.fcInputs.fcInp9.value = "";
          this.$.fcInputs.fcInp10.value = "";
          this.$.fcInputs.fcInp11.value = "";
          this.$.fcInputs.fcInp12.value = "";
          this.$.fcInputs.fcInp13.value = "";
          this.$.fcInputs.fcInp14.value = "";
          this.$.fcInputs.fcInp15.value = "";
  }

   
    });
  </script>
</dom-module>